# Distance Attack - Оверлей для показа расстояний в шутерах

![Python](https://img.shields.io/badge/python-v3.6+-blue.svg)
![Platform](https://img.shields.io/badge/platform-linux%20%7C%20windows-lightgrey.svg)

Программа-оверлей для отображения дистанционных кругов в шутерах от первого лица. Работает поверх любой игры без вмешательства в код игры.

## Особенности

- ✅ Прозрачный оверлей поверх игры
- ✅ Калибровка под любую игру
- ✅ Настраиваемые дистанции (по умолчанию: 1м, 5м, 10м, 25м, 40м)
- ✅ **Перспектива** - эллипсы вместо кругов для имитации земли
- ✅ Разные цвета для каждой дистанции
- ✅ Горячие клавиши для управления
- ✅ Автосохранение настроек
- ✅ Простой интерфейс управления
- ✅ Безопасный режим для Linux

## Установка

### Требования
- Python 3.6 или выше
- tkinter (обычно входит в стандартную поставку Python)

### Запуск

**Для Linux (рекомендуется):**
```bash
./run_safe.sh
```

**Универсальный запуск:**
```bash
python3 main.py
```

**⚠️ ВАЖНО ДЛЯ LINUX:** Используйте `run_safe.sh` для безопасного запуска с автовыключением через 5 минут.

## Использование

### 1. Первый запуск и калибровка

1. Запустите программу командой `python3 main.py`
2. Откроется окно управления и прозрачный оверлей на весь экран
3. Запустите вашу игру
4. В игре найдите объект на известном расстоянии (например, 10 метров)
5. Нажмите **F1** или кнопку "Калибровка" в окне управления
6. Введите известное расстояние в метрах (например, 10)
7. Появится красный круг - измените его размер **колесиком мыши** так, чтобы он точно соответствовал этому расстоянию в игре
8. Нажмите **Enter** для сохранения калибровки

### 2. Отображение дистанций

- Нажмите **F2** или кнопку "Включить/Выключить оверлей" для показа кругов дистанций
- На экране появятся цветные круги с подписями расстояний
- Центральная белая точка показывает центр прицела

### 3. Настройка дистанций

В окне управления можно:
- Изменить дистанции в полях ввода
- Нажать "Применить дистанции" для сохранения изменений
- Установить дистанцию в 0 для отключения конкретного круга

### 4. Настройка перспективы

**Перспектива** имитирует вид от первого лица в шутерах:
- **"Включить перспективу"** - переключение между кругами и эллипсами
- **"Высота горизонта"** - насколько низко располагается горизонт (0.0-0.8)
- **"Сжатие эллипсов"** - степень сжатия эллипсов (0.1 = сильно сжато, 1.0 = круг)
- **"Позиция ног"** - где находятся ваши ноги на экране (60%-95% от высоты)

**ВАЖНО:** Центр всех кругов находится в позиции ваших ног (внизу экрана), а не в центре экрана! Это правильно для шутеров от первого лица.

## Горячие клавиши

| Клавиша | Действие |
|---------|----------|
| **F1** | Калибровка |
| **F2** | Включить/Выключить оверлей |
| **ESC** | Выход из программы |
| **Ctrl+C** | Экстренный выход (Linux) |
| **Ctrl+Q** | Экстренный выход (Linux) |
| **Alt+F4** | Экстренный выход (Linux) |

Во время калибровки:
| Действие | Клавиша/Устройство |
|----------|-------------------|
| Изменить размер круга | **Колесико мыши** |
| Сохранить калибровку | **Enter** |
| Отменить калибровку | **ESC** |

## Цвета кругов

По умолчанию используются следующие цвета:
1. Красный (#FF0000)
2. Зеленый (#00FF00)
3. Синий (#0000FF)
4. Желтый (#FFFF00)
5. Пурпурный (#FF00FF)

## Настройки

Все настройки автоматически сохраняются в файл `distance_settings.json`:
- Калибровка (пикселей на метр)
- Дистанции
- Цвета кругов

## Советы по использованию

### Калибровка
- Используйте хорошо знакомые объекты для калибровки (двери, автомобили, здания)
- Калибруйтесь на средних дистанциях (5-15 метров) для лучшей точности
- При смене игры или разрешения экрана проведите калибровку заново

### Геймплей
- Программа работает в фоне, не влияя на производительность игры
- Можно быстро включать/выключать оверлей клавишей F2
- Круги помогают оценивать дальность стрельбы и планировать тактику

## Устранение проблем

### Программа не запускается
- Убедитесь, что установлен Python 3.6+
- Проверьте наличие tkinter: `python3 -c "import tkinter"`

### ⚠️ ЧЕРНЫЙ ЭКРАН НА LINUX (КРИТИЧЕСКАЯ ПРОБЛЕМА)
**Симптомы:** После запуска весь экран становится черным, ничего не реагирует
**Причина:** Полноэкранное окно без рамки блокирует систему
**Решения:**
1. **Используйте `./run_safe.sh`** - безопасный режим запуска
2. **Экстренный выход:** Ctrl+Alt+T → `pkill -9 -f "python3 main.py"`
3. **В крайнем случае:** Ctrl+Alt+F1 (переход в текстовый режим) → перезагрузка

### Оверлей не виден
- Убедитесь, что игра запущена в оконном или безрамочном режиме
- Проверьте, что оверлей включен (F2)
- Попробуйте Alt+Tab для переключения между окнами

### Не могу выйти из программы
**На Linux:**
- Нажмите красную кнопку "✕ ВЫХОД" в левом верхнем углу
- Используйте Ctrl+C, Ctrl+Q или Alt+F4
- Закройте через кнопку X в заголовке окна

### Калибровка неточная
- Калибруйтесь на объектах с точно известными размерами
- Избегайте калибровки на очень близких (< 3м) или далеких (> 50м) дистанциях
- При сомнениях проведите калибровку заново

## Совместимость

Программа протестирована на:
- Ubuntu 20.04/22.04
- Windows 10/11
- Python 3.6-3.11

Работает с любыми играми, поддерживающими оконный режим.

## Лицензия

Свободное использование для личных целей.

---

**Автор:** DeadLarsen  
**Версия:** 1.0  
**Дата:** 2024 